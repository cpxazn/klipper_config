[gcode_macro UNLOAD]
description: Unload filament helper
gcode:
  {action_respond_info("Unloading filament")}
  {% if printer.pause_resume.is_paused == 1 %}
    {% if printer.extruder.can_extrude == 1 %}
      SAVE_GCODE_STATE NAME=Filament_state
      G91
      G1 E-50 F300
      G90
      {action_respond_info("Done")}
      RESTORE_GCODE_STATE NAME=Filament_state
    {% else %}
      {action_respond_info("Hotend is not heated")}
    {% endif %}
  {% else %}
    {action_respond_info("Printer must be paused")}
  {% endif %}


[gcode_macro LOAD]
description: Load filament helper
gcode:
  {action_respond_info("Loading filament")}
  {% if printer.pause_resume.is_paused == 1 %}
    {% if printer.extruder.can_extrude == 1 %}
      SAVE_GCODE_STATE NAME=Filament_state
      G91
      G1 E30 F300
      G90
      {action_respond_info("Done")}
      RESTORE_GCODE_STATE NAME=Filament_state
    {% else %}
      {action_respond_info("Hotend is not heated")}
    {% endif %}
  {% else %}
    {action_respond_info("Printer must be paused")}
  {% endif %}